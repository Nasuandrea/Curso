<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
</head>
<body>
    <h1>Calculadora</h1>
    
    <div>
        <input type="text" id="pantalla" placeholder="0" value="">
        <br><br>
        <!-- botones de la calculadora 
         cada boton tiene un evento que llama a un funcion principal denominada "calc" y esta a su vez le agrego la propiedad del numero-->
        <button onclick="calc.agregarNumero('7')">7</button>
        <button onclick="calc.agregarNumero('8')">8</button>
        <button onclick="calc.agregarNumero('9')">9</button>


        <!-- botones operador es la funcion principal con la propiedad operador -->
        <button onclick="calc.agregarOperador('/')">/</button>
        <br>
        
        <button onclick="calc.agregarNumero('4')">4</button>
        <button onclick="calc.agregarNumero('5')">5</button>
        <button onclick="calc.agregarNumero('6')">6</button>
        <button onclick="calc.agregarOperador('*')">*</button>
        <br>
        
        <button onclick="calc.agregarNumero('1')">1</button>
        <button onclick="calc.agregarNumero('2')">2</button>
        <button onclick="calc.agregarNumero('3')">3</button>
        <button onclick="calc.agregarOperador('-')">-</button>
        <br>
        
        <button onclick="calc.agregarNumero('0')">0</button>

        <button onclick="calc.agregarNumero('.')">.</button>


        <button onclick="calc.limpiar()">C</button>
        <button onclick="calc.agregarOperador('+')">+</button>
        <br>
        
        <button onclick="calc.calcular()">=</button>
    </div>

    <script>
        // Objeto Calculadora
        //calc almacena los datos con la informacion necesaria
        const calc = {
            pantalla: document.getElementById('pantalla'),
            operador: null,
            valorAnterior: null,
            valorActual: '',

            // Función para agregar números
            agregarNumero: function(numero) {
                if (numero === '.' && this.valorActual.includes('.')) {
                    return;
                }
                this.valorActual += numero;
                this.actualizarPantalla();
            },

            // Función para agregar operador
            agregarOperador: function(op) {
                if (this.valorActual === '') {
                    return;
                }

                if (this.valorAnterior !== null && this.operador !== null) {
                    this.calcularInterno();
                }

                this.operador = op;
                this.valorAnterior = this.valorActual;
                this.valorActual = '';
            },

            // Función interna para calcular
            calcularInterno: function() {
                if (this.valorAnterior === null || this.operador === null || this.valorActual === '') {
                    return;
                }

                const anterior = parseFloat(this.valorAnterior);
                const actual = parseFloat(this.valorActual);
                let resultado;

                if (this.operador === '+') {
                    resultado = anterior + actual;
                } else if (this.operador === '-') {
                    resultado = anterior - actual;
                } else if (this.operador === '*') {
                    resultado = anterior * actual;
                } else if (this.operador === '/') {
                    if (actual === 0) {
                        alert('No se puede dividir entre cero');
                        this.limpiar();
                        return;
                    }
                    resultado = anterior / actual;
                }

                this.valorActual = resultado.toString();
                this.operador = null;
                this.valorAnterior = null;
            },

            // Función para calcular resultado final
            calcular: function() {
                if (this.valorAnterior === null || this.operador === null || this.valorActual === '') {
                    return;
                }

                this.calcularInterno();
                this.actualizarPantalla();
            },

            // Función para limpiar
            limpiar: function() {
                this.valorActual = '';
                this.valorAnterior = null;
                this.operador = null;
                this.actualizarPantalla();
            },

            // Función para actualizar pantalla
            actualizarPantalla: function() {
                this.pantalla.value = this.valorActual || '0';
            }
        };

        // Inicializar pantalla
        calc.actualizarPantalla();
    </script>
</body>
</html>